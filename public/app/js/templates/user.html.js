'use strict';
angular.module( 'portailApp' )
  .run( [ '$templateCache',
    function( $templateCache ) {
      $templateCache.put( 'views/user.html',
                          '<div class="row user-profil">    <header>        <h3>Profil utilisateur</h3>        <h1 ng:cloak>{{current_user.prenom}} {{current_user.nom}}</h1>        <h2 ng:cloak>{{current_user.profil_actif.etablissement}}</h2>        <h2 ng:cloak>{{current_user.profil_actif.nom}}</h2>    </header>    <div class="form">        <accordion close-others="false">            <accordion-group data-is-open="groups[ 0 ].ouvert" ng:if="groups[ 0 ].enabled">                <accordion-heading>                    <span class="glyphicon" ng:class="{\'glyphicon-chevron-down\': groups[ 0 ].ouvert, \'glyphicon-chevron-right\': !groups[ 0 ].ouvert}"></span> Informations                </accordion-heading>                <div class="row">                    <div class="avatar-container form-group">                        <label>Avatar :</label>                        <div class="avatar">                            <!-- FIXME: disabled due to bug #70 -->                            <!-- <button class="delete-avatar" ng:click="delete_avatar()">x</button> -->                            <img draggable="false" class="svg"                                 ng:src="{{avatar.image ? avatar.image : current_user.avatar}}" />                            <input type="file" ng-file-select="onFileSelect($files)" >                            <footer>                                <button ng:disabled="!avatar.image"                                        ng:click="upload_avatar()">Valider l\'avatar</button>                            </footer>                        </div>                    </div>                    <div class="form-group">                        <label for="nom">Nom :</label>                        <input type="text"                               id="nom"                               class="form-control"                               ng:disabled="!current_user.editable"                               ng:change="mark_as_dirty( \'nom\' )"                               ng:model="current_user.nom">                    </div>                    <div class="form-group">                        <label for="prenom">Pr√©nom :</label>                        <input type="text"                               id="prenom"                               class="form-control"                               ng:disabled="!current_user.editable"                               ng:change="mark_as_dirty( \'prenom\' )"                               ng:model="current_user.prenom">                    </div>                    <div class="form-group">                        <label for="datenaissance">Date de naissance :</label>                        <input type="text"                               id="date_naissance"                               class="form-control"                               disabled                               value="{{current_user.date_naissance | amDateFormat: \'LL\'}}"                               ng:if="!current_user.editable" />                        <div uib-dropdown                             id="datenaissance"                             class="dropdown form-control date-naissance"                             ng:if="current_user.editable">                            <a uib-dropdown-toggle                               class="dropdown-toggle"                               role="button"                               data-toggle="uib-dropdown"                               data-target="#"                               href>{{current_user.date_naissance | amDateFormat: \'LL\'}}</a>                            <div uib-dropdown-menu                                 class="dropdown-menu"                                 role="menu"                                 ng:click="$event.stopImmediatePropagation()">                                <div uib-datepicker                                     datepicker-options="datepicker_options"                                     ng:disabled="!current_user.editable"                                     ng:change="mark_as_dirty( \'date_naissance\' )"                                     ng:model="current_user.date_naissance"                                     ng:required="true">                                </div>                            </div>                        </div>                    </div>                    <div class="form-group">                        <label for="adresse">Adresse :</label>                        <input type="text"                               id="adresse"                               class="form-control"                               ng:disabled="!current_user.editable"                               ng:change="mark_as_dirty( \'adresse\' )"                               ng:model="current_user.adresse">                    </div>                    <div class="form-group">                        <label for="codepostal">Code postal :</label>                        <input type="text"                               id="codepostal"                               class="form-control"                               ng:disabled="!current_user.editable"                               ng:change="mark_as_dirty( \'code_postal\' )"                               ng:model="current_user.code_postal">                    </div>                    <div class="form-group">                        <label for="ville">Ville :</label>                        <input type="text"                               id="ville"                               class="form-control"                               ng:disabled="!current_user.editable"                               ng:change="mark_as_dirty( \'ville\' )"                               ng:model="current_user.ville">                    </div>                    <div class="form-group"                         ng:repeat="email in current_user.emails | orderBy:\'principal\':true | filter:filter_emails()">                        <label for="courriel">Courriel <span ng:if="email.principal">principal</span> :</label>                        <input type="text"                               id="courriel"                               class="form-control"                               ng:disabled="true"                               ng:model="email.adresse">                    </div>                </div>            </accordion-group>            <accordion-group data-is-open="groups[ 1 ].ouvert" ng:if="groups[ 1 ].enabled">                <accordion-heading>                    <span class="glyphicon" ng:class="{\'glyphicon-chevron-down\': groups[ 1 ].ouvert, \'glyphicon-chevron-right\': !groups[ 1 ].ouvert}"></span> Mot de passe                </accordion-heading>                <div class="row">                    <div class="form-group">                        <label for="oldpasswd">Ancien mot de passe :</label>                        <input type="password" class="form-control" id="oldpasswd"                               ng:change="mark_as_dirty( \'password\' )"                               ng:model="password.old">                    </div>                </div>                <div class="row">                    <div class="form-group">                        <label for="newpasswd1">Nouveau mot de passe :</label>                        <input type="password" class="form-control" id="newpasswd1"                               ng:change="mark_as_dirty( \'password\' )"                               ng:model="password.new1">                    </div>                    <div class="form-group">                        <label for="newpasswd2">Confirmer le nouveau mot de passe :</label>                        <input type="password" class="form-control" id="newpasswd2"                               ng:change="mark_as_dirty( \'password\' )"                               ng:model="password.new2">                    </div>                </div>            </accordion-group>            <!--                 <accordion-group data-is-open="groups[ 2 ].ouvert" ng:if="groups[ 2 ].enabled">                 <accordion-heading>                 <span class="glyphicon" ng:class="{\'glyphicon-chevron-down\': groups[ 2 ].ouvert, \'glyphicon-chevron-right\': !groups[ 2 ].ouvert}"></span> droits                 </accordion-heading>                 <p>The body of the accordion group grows to fit the contents</p>                 </accordion-group>                 <accordion-group data-is-open="groups[ 3 ].ouvert" ng:if="groups[ 3 ].enabled">                 <accordion-heading>                 <span class="glyphicon" ng:class="{\'glyphicon-chevron-down\': groups[ 3 ].ouvert, \'glyphicon-chevron-right\': !groups[ 3 ].ouvert}"></span> statistiques                 </accordion-heading>                 <p>The body of the accordion group grows to fit the contents</p>                 </accordion-group> -->        </accordion>    </div>    <footer>        <button ng:click="fermer( false )">Annuler</button>        <button ng:click="fermer( true )">Enregistrer</button>    </footer></div>' );     } ] );